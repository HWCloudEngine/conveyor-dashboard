{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% load compress %}
{% block title %}{% trans "Overview" %}{% endblock %}
{% block main %}
  <div class="conveyor-overview"></div>
  <div>
    <input id="id_action_type" name="action_type" type="hidden" value="">
    <input id="id_plan_type" name="plan_type" type="hidden" value="{{plan.plan_type}}">
    <input id="id_plan_id" name="plan_id" type="hidden" data-plan_id="{{ plan.plan_id }}" value="{{ plan.plan_id }}" />
    <input id="id_update_resource" name="update_resource" type="hidden" value="[]" />
    <input id="id_updated_resources" name="updated_resources" type="hidden" value="{}"/>
    <input id="id_dependencies" name="dependencies" type="hidden" value="{}"/>
    <div id="is_original" data-is_original="{{is_original}}"></div>
  </div>
  <!-- Actions -->
  <!--AZ-->
  <div>
    <div class="left">
      <select class="form-control" id="id_availability_zone" name="availability_zone" data-original-title="" title="">
        {%for az in azs%}<option value="{{az.zoneName}}" {%ifequal availability_zone az.zoneName %}selected="selected"{%endifequal%}>{{az.zoneName}}</option>{%endfor%}
      </select>
    </div>
    <div class="right"><a class="btn btn-default btn-sm ajax-modal btn-clone" {% if plan %} href="{% url "horizon:conveyor:plans:destination" plan.plan_id %}" {% endif %}>{% trans "Clone" %}</a></div>
  </div>
  {% if plan %}
    {%  include "_deps_topo.html" %}
  {% endif %}
{% endblock %}
{% block js %}
  {% include "horizon/_scripts.html" %}
  <script type="text/javascript">
    $(function() {
      "use strict";

      $("g.node").click(function () {
        conveyorEditPlanRes.nodeClick(this);
      });

      $('[name=availability_zone]').change(function () {
        horizon.modals.modal_spinner(gettext("Loading"));
        window.location.href = '{% url 'horizon:conveyor:overview:index' %}' + '?availability_zone=' + $(this).val();
      });
    });
  </script>
{% endblock %}
